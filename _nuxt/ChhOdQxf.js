import{m as h,r as n,n as b,o as m,c as f,b as u,u as v,A as _,_ as p,p as C,a as r,q as D,s as x,v as w}from"./DpOTWwlS.js";import{_ as y}from"./DwInR8GM.js";import{F as A}from"./BX8L7RfC.js";import{z as a}from"./DXqQCM1T.js";import"./COYyFepG.js";const N={class:"overflow-x-auto h-full p-4"},T=h({__name:"CarPartsTable",setup(g){const d=n([{field:"name",headerName:"Name",sortable:!0,filter:"agTextColumnFilter"},{field:"make",headerName:"Make",sortable:!0,filter:"agTextColumnFilter"},{field:"model",headerName:"Model",sortable:!0,filter:"agTextColumnFilter"},{field:"year",headerName:"Year",sortable:!0,filter:"agNumberColumnFilter"},{field:"vin",headerName:"VIN",sortable:!0,filter:"agTextColumnFilter"},{field:"request",headerName:"Request",sortable:!0,filter:"agTextColumnFilter"},{field:"phone",headerName:"Phone",sortable:!0,filter:"agTextColumnFilter"},{field:"createdAt",headerName:"Created At",sortable:!0,sort:"desc"}]),i=n({flex:1,minWidth:150,resizable:!0,filter:!0});a.object({name:a.string(),make:a.string(),model:a.string(),year:a.number(),vin:a.string(),request:a.string(),createdAt:a.date().default(()=>new Date)});const s=n([]),l=async()=>{try{const e=await $fetch("/api/cars/get");s.value=e?e.map(o=>({name:o.name,make:o.make,model:o.model,year:o.year,vin:o.vin,request:o.request,phone:o.phone,createdAt:new Date(o.createdAt)})):[]}catch(t){console.error("Error fetching car parts:",t)}console.log(s.value)};function c({api:t}){l()}return b(()=>{l()}),(t,e)=>(m(),f("div",N,[u(v(_),{class:"ag-theme-alpine",style:{width:"100%",height:"600px"},onGridReady:c,columnDefs:d.value,defaultColDef:i.value,rowData:s.value,pagination:!0,paginationPageSize:10},null,8,["columnDefs","defaultColDef","rowData"])]))}}),F=p(T,[["__scopeId","data-v-9ebc936e"]]),k={class:"overflow-x-auto h-full p-4"},$=h({__name:"ContactTable",setup(g){const d=n([{field:"name",headerName:"Name",sortable:!0,filter:"agTextColumnFilter"},{field:"email",headerName:"Email",sortable:!0,filter:"agTextColumnFilter"},{field:"message",headerName:"Message",sortable:!0,filter:"agTextColumnFilter"},{field:"createdAt",headerName:"Created At",sortable:!0,sort:"desc"}]),i=n({flex:1,minWidth:150,resizable:!0,filter:!0});a.object({name:a.string(),email:a.string(),message:a.string(),createdAt:a.date().default(()=>new Date)});const s=n([]),l=async()=>{try{const t=await $fetch("/api/contact/get");s.value=t.map(e=>({name:e.name,email:e.email,message:e.message,createdAt:new Date(e.createdAt)}))}catch(t){console.error("Error fetching contacts:",t)}};function c({api:t}){l()}return b(()=>{l()}),(t,e)=>(m(),f("div",k,[u(v(_),{class:"ag-theme-alpine",style:{width:"100%",height:"600px"},onGridReady:c,columnDefs:d.value,defaultColDef:i.value,rowData:s.value,pagination:!0,paginationPageSize:10},null,8,["columnDefs","defaultColDef","rowData"])]))}}),P=p($,[["__scopeId","data-v-8d9ee6b0"]]),R={class:"overflow-x-auto h-full p-4"},S=h({__name:"ReviewsTable",setup(g){const d=n([{field:"name",headerName:"Name",sortable:!0,filter:"agTextColumnFilter"},{field:"message",headerName:"Message",sortable:!0,filter:"agTextColumnFilter"},{field:"createdAt",headerName:"Created At",sortable:!0,sort:"desc"},{field:"rating",headerName:"Rating",sortable:!0,filter:"agNumberColumnFilter"},{field:"isApproved",headerName:"Approved",cellRenderer:t=>`<input type="checkbox" ${t.value?"checked":""} />`,onCellClicked:async t=>{const e=!t.data.isApproved;t.data.isApproved=e,t.api.refreshCells({rowNodes:[t.node]});try{await $fetch("/api/reviews/approve",{method:"POST",body:{id:t.data._id,isApproved:e}}),console.log("Review approval status updated successfully")}catch(o){console.error("Error updating review approval status:",o),t.data.isApproved=!e,t.api.refreshCells({rowNodes:[t.node]})}},editable:!0}]),i=n({flex:1,minWidth:150,resizable:!0,filter:!0});a.object({name:a.string(),message:a.string(),createdAt:a.date().default(()=>new Date),rating:a.number().int().min(1).max(5),isApproved:a.boolean().default(!1)});const s=n([]),l=async()=>{try{const t=await $fetch("/api/reviews/get");t?s.value=t.map(e=>({_id:e._id,name:e.name,message:e.message,createdAt:new Date(e.createdAt),rating:e.rating,isApproved:e.isApproved})):s.value=[]}catch(t){console.error("Error fetching reviews:",t)}};function c({api:t}){l()}return b(()=>{l()}),(t,e)=>(m(),f("div",R,[u(v(_),{class:"ag-theme-alpine",style:{width:"100%",height:"600px"},onGridReady:c,columnDefs:d.value,defaultColDef:i.value,rowData:s.value,pagination:!0,paginationPageSize:10,paginationPageSizeSelector:[10,20,50,100]},null,8,["columnDefs","defaultColDef","rowData"])]))}}),q=p(S,[["__scopeId","data-v-dc0a0416"]]),z={class:"p-8"},M={key:0},E={class:"mb-4"},I={class:"mb-4"},V={key:1},L={class:"mt-10"},G={class:"mt-10"},j={__name:"admin-serega",setup(g){const d=n(!1),i=n(""),s=n(""),l=C(),c=async()=>{try{(await $fetch("/api/auth/login",{method:"POST",body:{username:i.value,password:s.value}})).message==="Admin access granted"?(d.value=!0,l.success("Login successful")):l.error("Login failed")}catch(t){l.error("Login failed: "+t.message)}};return(t,e)=>(m(),f("div",null,[u(y),r("main",z,[e[8]||(e[8]=r("h1",{class:"text-4xl font-bold text-center mb-8"},"Панель Адміна",-1)),d.value?(m(),f("div",V,[r("section",null,[e[5]||(e[5]=r("h2",{class:"text-2xl font-bold mb-4"},"Запчастини",-1)),u(F)]),r("section",L,[e[6]||(e[6]=r("h2",{class:"text-2xl font-bold mb-4"},"Пропозиції",-1)),u(P)]),r("section",G,[e[7]||(e[7]=r("h2",{class:"text-2xl font-bold mb-4"},"Відгуки",-1)),u(q)])])):(m(),f("div",M,[r("form",{onSubmit:D(c,["prevent"]),class:"max-w-lg mx-auto"},[r("div",E,[e[2]||(e[2]=r("label",{class:"block text-sm font-semibold mb-2"},"Логін",-1)),x(r("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[w,i.value]])]),r("div",I,[e[3]||(e[3]=r("label",{class:"block text-sm font-semibold mb-2"},"Пароль",-1)),x(r("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.value=o),type:"password",class:"w-full p-2 border rounded",required:""},null,512),[[w,s.value]])]),e[4]||(e[4]=r("button",{type:"submit",class:"bg-primary text-white w-full py-2 px-4 rounded-lg hover:bg-secondary-light"}," Увійти ",-1))],32)]))]),u(A)]))}},H=p(j,[["__scopeId","data-v-06fc06f1"]]);export{H as default};
